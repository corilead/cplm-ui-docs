(window.webpackJsonp=window.webpackJsonp||[]).push([[43],{"./src/picker/RepositoryPicker/index.mdx":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return m}));var a=n("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),r=n("react"),i=n.n(r),o=n("./node_modules/@mdx-js/react/dist/esm.js"),c=n("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),s=n("./node_modules/antd/es/button/index.js"),l=n("./src/picker/RepositoryPicker/index.tsx"),d=(n("./node_modules/antd/dist/antd.css"),function(e){var t=Object(r.useState)(!1),n=Object(c.a)(t,2),a=n[0],o=n[1];return i.a.createElement("div",{style:{position:"relative"}},i.a.createElement(s.a,{type:"primary",onClick:function(){o(!0)}},"\u6253\u5f00\u5bb9\u5668\u9009\u62e9\u5668"),i.a.createElement(l.a,{visible:a,title:"\u641c\u7d22\u5bb9\u5668",multi:!0,onOk:function(e){o(!1)},onCancel:function(){o(!1)}}))});d&&d===Object(d)&&Object.isExtensible(d)&&Object.defineProperty(d,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"RepositoryPickerDemo",filename:"demo\\RepositoryPicker.tsx"}});var u={};function m(e){var t=e.components,n=Object(a.a)(e,["components"]);return Object(o.b)("wrapper",Object.assign({},u,n,{components:t,mdxType:"MDXLayout"}),Object(o.b)("h2",{id:"demo"},"Demo"),Object(o.b)(d,{mdxType:"RepositoryPickerDemo"}),Object(o.b)("h2",{id:"\u5c5e\u6027"},"\u5c5e\u6027"),Object(o.b)("pre",null,Object(o.b)("code",Object.assign({parentName:"pre"},{}),"  // \u662f\u5426\u53ef\u89c1\n  visible: boolean;\n  // \u6807\u9898\n  title: React.ReactNode;\n  // \u662f\u5426\u53ef\u591a\u9009\n  multi?: boolean;\n  // \u6570\u636e\u9009\u62e9\u65f6\u7684\u989d\u5916\u903b\u8f91(\u53ef\u7a7a)\n  onSelect?: Function;\n  // \u6570\u636e\u9009\u5b9a\u65f6\u7684\u65b9\u6cd5\n  onOk: Function;\n  // \u53d6\u6d88\u6570\u636e\u9009\u5b9a\u7684\u65b9\u6cd5\n  onCancel: Function;\n  // \u70b9\u51fb\u786e\u5b9a\u6309\u94ae\u65f6\u7684\u7b49\u5f85\u72b6\u6001\n  confirmLoading?: boolean;\n  // \u9644\u52a0\u7684\u7b5b\u9009\u578b\u53f7\u5e93\u7684\u6761\u4ef6\n  extraQuery?: { [param: string]: any };\n")),Object(o.b)("h2",{id:"\u4ee3\u7801"},"\u4ee3\u7801"),Object(o.b)("pre",null,Object(o.b)("code",Object.assign({parentName:"pre"},{}),'import React, { useState } from "react";\nimport { Button } from "antd";\nimport RepositoryPicker from "../src/picker/RepositoryPicker";\nimport "antd/dist/antd.css";\n\nconst RepositoryPickerDemo: React.FunctionComponent = (props) => {\n  const [pickerVisible, setpickerVisible] = useState(false);\n  return (\n    <div style={{ position: "relative" }}>\n      <Button type="primary"\n        onClick={() => {\n          setpickerVisible(true);\n        }}\n      >\n        \u6253\u5f00\u5bb9\u5668\u9009\u62e9\u5668\n      </Button>\n      <RepositoryPicker\n        visible={pickerVisible}\n        title="\u641c\u7d22\u5bb9\u5668"\n        multi\n        onOk={(rows: any) => {\n          setpickerVisible(false);\n        }}\n        onCancel={() => {\n          setpickerVisible(false);\n        }}\n      />\n    </div>\n  );\n};\n\nexport { RepositoryPickerDemo };\n')))}m&&m===Object(m)&&Object.isExtensible(m)&&Object.defineProperty(m,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"MDXContent",filename:"src\\picker\\RepositoryPicker\\index.mdx"}}),m.isMDXComponent=!0},"./src/picker/RepositoryPicker/index.tsx":function(e,t,n){"use strict";var a=n("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),r=n("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),i=n("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator/index.js"),o=n.n(i),c=n("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),s=n("react"),l=n.n(s),d=n("./node_modules/@ant-design/icons/es/icons/PicRightOutlined.js"),u=n("./node_modules/@ant-design/icons/es/icons/SearchOutlined.js"),m=n("./node_modules/@ant-design/icons/es/icons/ReloadOutlined.js"),b=n("./node_modules/antd/es/layout/index.js"),p=n("./node_modules/antd/es/card/index.js"),f=n("./node_modules/antd/es/spin/index.js"),j=n("./node_modules/antd/es/tree/index.js"),y=n("./node_modules/antd/es/empty/index.js"),O=n("./node_modules/antd/es/form/index.js"),v=n("./node_modules/antd/es/input/index.js"),g=n("./node_modules/antd/es/button/index.js"),h=n("./node_modules/antd/es/table/index.js"),k=n("./node_modules/moment/moment.js"),x=n.n(k),_=n("./src/display/index.tsx"),E=n("./node_modules/qs/lib/index.js"),C=n("./node_modules/@cpdm/util/es/index.js"),S=n("./src/picker/utils.ts"),w=sessionStorage.getItem("TEST_SVR")||"",R=function(){var e=Object(c.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(C.a)("".concat(w,"/plm/api/v2/cpdm/repositories").concat(Object(E.stringify)(t,{addQueryPrefix:!0}))));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=Object(c.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(C.a)("".concat(w,"/plm/api/v2/cpdm/repo-series")));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),I=function(e){var t=e.visible,n=e.title,i=e.multi,k=e.onOk,E=e.onCancel,C=e.confirmLoading,w=e.extraQuery,I=Object(s.useState)({content:[],pagination:{}}),A=Object(r.a)(I,2),D=A[0],T=A[1],V=Object(s.useState)(!1),z=Object(r.a)(V,2),B=z[0],F=z[1],L=Object(s.useState)([]),M=Object(r.a)(L,2),N=M[0],Y=M[1],K=Object(s.useState)(!1),Q=Object(r.a)(K,2),X=Q[0],J=Q[1],W=Object(s.useState)({modelSeriesId:void 0,name:void 0,modelCode:void 0}),q=Object(r.a)(W,2),G=q[0],H=q[1],U=null;N&&N.length&&(U=[{key:"",value:"",title:l.a.createElement("strong",null,"\u5168\u90e8\u578b\u53f7\u7cfb\u5217"),icon:l.a.createElement(d.a,null),children:N.map((function(e){return{key:e.id,title:e.name}}))}]);var Z=Object(s.useState)([]),$=Object(r.a)(Z,2),ee=$[0],te=$[1],ne=Object(s.useCallback)(function(){var e=Object(c.a)(o.a.mark((function e(t){var n,r,i=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:{current:1,pageSize:10},i.length>2?i[2]:void 0,i.length>3?i[3]:void 0,i.length>4?i[4]:void 0,F(!0),e.next=7,R(Object(a.a)(Object(a.a)({},t),{},{page:n.current-1,size:n.pageSize,belongTo:!0},w));case 7:(r=e.sent).content&&Array.isArray(r.content)&&T({content:r.content,pagination:{current:r.number+1,pageSize:r.size,total:r.totalElements,showTotal:function(e){return"\u5171".concat(e,"\u9879")}}}),F(!1);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[G]),ae=Object(s.useCallback)(Object(c.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return J(!0),e.next=3,P();case 3:(t=e.sent)&&Array.isArray(t)&&Y(t),J(!1);case 6:case"end":return e.stop()}}),e)}))),[]),re=Object(s.useCallback)((function(e){var t=Object(r.a)(e,1)[0],n=Object(a.a)(Object(a.a)({},G),{},{modelSeriesId:t});H(n),te([]),ne(n)}),[G]),ie=Object(s.useCallback)((function(){te([]),ne(G)}),[G]),oe=Object(s.useCallback)((function(){var e={modelSeriesId:void 0,name:void 0,modelCode:void 0};H(e),te([]),ne(e)}),[]),ce=Object(s.useCallback)((function(e,t){var n=Object(S.a)(e,t,ee,i);te(n)}),[ee]),se=Object(s.useCallback)((function(e,t,n){var a=Object(S.b)(e,n,ee);te(a)}),[ee]),le=[{dataIndex:"modelCode",title:"\u578b\u53f7\u4ee3\u53f7",ellipsis:!0},{dataIndex:"name",title:"\u578b\u53f7\u540d\u79f0"},{dataIndex:"series",title:"\u578b\u53f7\u7cfb\u5217",ellipsis:!0},{dataIndex:"ownerFullName",title:"\u8d1f\u8d23\u4eba",width:160,ellipsis:!0,render:function(e){return e||"-"}},{dataIndex:"createStamp",title:"\u521b\u5efa\u65f6\u95f4",render:function(e){return x()(e).format("YYYY-MM-DD hh:mm")},width:135,ellipsis:!0}];Object(s.useEffect)((function(){return ne(G),ae(),function(){}}),[]);var de=l.a.createElement(b.a,{style:{backgroundColor:"transparent",marginBottom:8}},l.a.createElement(b.a.Sider,{theme:"light",width:256},l.a.createElement(p.a,{style:{height:"100%",marginRight:8},bodyStyle:{height:"100%",padding:8,overflow:"auto"}},X?l.a.createElement("div",{style:{height:"100%",textAlign:"center",display:"flex",justifyContent:"center",alignItems:"center"}},l.a.createElement(f.a,{tip:"Loading..."})):U?l.a.createElement(j.a,{showLine:!0,defaultExpandAll:!0,treeData:U,onSelect:re,selectedKeys:G.modelSeriesId?[G.modelSeriesId]:[]}):l.a.createElement("div",{style:{height:"100%",textAlign:"center",display:"flex",justifyContent:"center",alignItems:"center"}},l.a.createElement("div",null,l.a.createElement(y.a,{description:"\u5c1a\u65e0\u53ef\u9009\u7684\u578b\u53f7\u7cfb\u5217"}))))),l.a.createElement(b.a.Content,null,l.a.createElement(O.a,{layout:"inline",style:{marginBottom:12}},l.a.createElement(O.a.Item,{label:"\u578b\u53f7\u540d\u79f0"},l.a.createElement(v.a,{style:{width:200},value:G.name,onChange:function(e){var t=e.target.value;H(Object(a.a)(Object(a.a)({},G),{},{name:t}))}})),l.a.createElement(O.a.Item,{label:"\u578b\u53f7\u4ee3\u53f7"},l.a.createElement(v.a,{style:{width:200},value:G.modelCode,onChange:function(e){var t=e.target.value;H(Object(a.a)(Object(a.a)({},G),{},{modelCode:t}))}})),l.a.createElement(O.a.Item,{style:{marginRight:0}},l.a.createElement(g.a,{icon:l.a.createElement(u.a,null),type:"primary",onClick:ie,style:{marginRight:8,marginTop:1},disabled:C},"\u68c0\u7d22"),l.a.createElement(g.a,{icon:l.a.createElement(m.a,null),onClick:oe,disabled:C},"\u91cd\u7f6e"))),l.a.createElement(h.a,{columns:[].concat(le),dataSource:D.content,pagination:D.pagination,onChange:function(e,t,n,a){ne(G,e,t,n,a)},size:"small",bordered:!0,loading:B,rowSelection:{columnWidth:30,selectedRowKeys:ee.map((function(e){return e.id})),type:i?"checkbox":"radio",onSelect:ce,onSelectAll:se,fixed:!0},rowKey:function(e){return e.id}})));return l.a.createElement(_.f,{visible:t,confirmLoading:C,width:1024,title:n,bodyStyle:{padding:12,paddingBottom:0},onOk:function(){k(ee)},onCancel:function(){E()}},de)};t.a=I,I&&I===Object(I)&&Object.isExtensible(I)&&Object.defineProperty(I,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"RepositoryPicker",filename:"src\\picker\\RepositoryPicker\\index.tsx"}})},"./src/picker/utils.ts":function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return o}));var a=n("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js"),r=n("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js"),i=function(e,t,n,i){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"id";if(t){var c,s=!1,l=Object(r.a)(n);try{for(l.s();!(c=l.n()).done;)if(c.value[o]===e[o]){s=!0;break}}catch(b){l.e(b)}finally{l.f()}if(!s)return i?[].concat(Object(a.a)(n),[e]):[e]}else{var d,u=0,m=Object(r.a)(n);try{for(m.s();!(d=m.n()).done;){if(d.value[o]===e[o])return i?(n.splice(u,1),Object(a.a)(n)):[e];u++}}catch(b){m.e(b)}finally{m.f()}}return n};"undefined"!==typeof i&&i&&i===Object(i)&&Object.isExtensible(i)&&Object.defineProperty(i,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"select",filename:"src\\picker\\utils.ts"}});var o=function(e,t,n){var i,o,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"id",s=Object(r.a)(t);try{for(s.s();!(o=s.n()).done;)if(i=o.value,e){var l,d=!1,u=Object(r.a)(n);try{for(u.s();!(l=u.n()).done;)if(l.value[c]===i[c]){d=!0;break}}catch(f){u.e(f)}finally{u.f()}d||n.push(i)}else{var m,b=0,p=Object(r.a)(n);try{for(p.s();!(m=p.n()).done;){if(m.value[c]===i[c]){n.splice(b,1);break}b++}}catch(f){p.e(f)}finally{p.f()}}}catch(f){s.e(f)}finally{s.f()}return Object(a.a)(n)};"undefined"!==typeof o&&o&&o===Object(o)&&Object.isExtensible(o)&&Object.defineProperty(o,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"selectAll",filename:"src\\picker\\utils.ts"}})}}]);